angular.module("sb.main",["angularFileUpload","ja.qr","ngStorage","ngRoute"]).controller("mainCtrl",["$window","$scope","$localStorage","$http","anchorSmoothScroll","FileUploader",function(t,n,e,o,i,r){n.close_page=function(){t.location="about:blank"};const a=location.origin+location.pathname;n.theFiles=[],null==e.you_streams&&(e.you_streams=["public"]),n.you_streams=e.you_streams,n.curr_streams_data=[],n.curr_stream="",n.dir_to_add="",n.add_dir=function(){var t=n.dir_to_add;""!==t&&(n.you_streams.includes(t)||(n.you_streams.push(t),n.dir_to_add=""))},n.get_stream_data=function(t){n.curr_stream=t,get_streams(o,t,function(t){n.curr_streams_data=t})},n.refreshStreamDir=function(){n.get_stream_data(n.curr_stream)},n.removeStreamDir=function(){var t=n.curr_stream,e=n.you_streams.indexOf(t);e>-1&&n.you_streams.splice(e,1),n.curr_stream=""},n.showExplore=function(){n.state=2,n.curr_streams_data=[],n.curr_stream=""},n.showMe=function(){n.state=3,n.bind_dir_uuid=e.dir_uuid,n.bind_author=e.author},n.showStats=function(){n.state=5,get_stats(o,function(t){n.stats=t})},n.generate_random_dir_uuid=function(){get_genuuid(o,function(t){n.bind_dir_uuid=t})},n.saveMySettings=function(){e.dir_uuid=n.bind_dir_uuid,e.author=n.bind_author,n.dir_to_add=e.dir_uuid,n.add_dir()},n.state=1;const u=a.replace(/^http/,"ws")+"binary-uploader-stream",d=n.uploader=new r({binaryJsClient_ulr:u});d.onWhenAddingFileFailed=function(t,n,e){},d.onAfterAddingFile=function(t){get_genid(o,function(o){t.metadata={file_uuid:o,dir_uuid:e.dir_uuid,author:e.author,name:t._file.name,size:t._file.size},t.options=n.options,t.download_url=a+"d/"+t.metadata.file_uuid,t.isStreaming=!1,t.instances=[],t.original_dir_uuid=e.dir_uuid,t.upload(),n.theFiles.push(t),setTimeout(function(){i.scrollTo("step2")},50)})},d.onAfterAddingAll=function(t){},d.onBeforeUploadItem=function(t){},d.onProgressItem=function(t,n){},d.onProgressAll=function(t){},d.onSuccessItem=function(t,n,e,o){},d.onErrorItem=function(t,n,e,o){},d.onCancelItem=function(t,n,e,o){},d.onCompleteItem=function(t,n,e,o){},d.onCompleteAll=function(){}}]);